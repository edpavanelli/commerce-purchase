spring.application.name=purchase-management

# === H2 Database ===
#spring.datasource.url=jdbc:h2:mem:commerce-purchase
spring.datasource.url=jdbc:h2:file:./data/commerce-purchase;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;AUTO_SERVER=TRUE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# === JPA / Hibernate ===
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# === H2 Console ===
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# === Security ===

server.port=8443
server.ssl.enabled=true
server.ssl.key-store=classpath:certs/server-keystore.p12
server.ssl.key-store-password=changeit
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=myserver

server.ssl.trust-store=classpath:certs/server-truststore.p12
server.ssl.trust-store-password=changeit
server.ssl.trust-store-type=PKCS12

server.ssl.client-auth=need


# === Actuator ===

management.endpoints.web.exposure.include=*
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
info.app.name=Purchase Management
info.app.version=1.1.0
info.app.description=Microservice to manage purchases



# === Resilience4j ===

resilience4j.circuitbreaker.instances.treasuryExchange.register-health-indicator=true
resilience4j.circuitbreaker.instances.treasuryExchange.sliding-window-size=10
resilience4j.circuitbreaker.instances.treasuryExchange.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.treasuryExchange.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.treasuryExchange.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.treasuryExchange.permitted-number-of-calls-in-half-open-state=3

resilience4j.retry.instances.treasuryExchange.max-attempts=3
resilience4j.retry.instances.treasuryExchange.wait-duration=500ms


# === Swagger / OpenAPI ===
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs
springdoc.packages-to-scan=net.mycompany.commerce.purchasemgmt
springdoc.default-produces-media-type=application/json
springdoc.default-consumes-media-type=application/json


# === Springwolf ===
springwolf.docket.base-package=net.mycompany.commerce.purchasemgmt.application.purchase
springwolf.docket.info.title=Purchase Management AsyncAPI
springwolf.docket.info.version=1.0.0
springwolf.docket.info.description=Event Documentation for Purchase Management Service
springwolf.docket.servers.mock.protocol=JMS
springwolf.docket.servers.mock.host=https://localhost:8443
springwolf.docket.servers.mock.pathname=/commerce/purchase/v1/store

# === Custom Properties ===

# === Security ===

jwt.secret=sb12m38asdnkajsdn1237812378absdj123!@#abcxyz
jwt.expiration=3600000

auth.client-id=myclient
auth.client-secret=changeit

# === Environment Currencies ===

environment.default.currency.code=USD
environment.default.cuntries.exchange=Brazil,Mexico,India,Canada,Norway


# === External APIs ===

api.service.treasury.base-url=https://api.fiscaldata.treasury.gov
api.service.treasury.path=/services/api/fiscal_service/v1/accounting/od/rates_of_exchange
api.service.treasury.pagination.number=1
api.service.treasury.pagination.size=2

# === INTERNAL ERRORS MESSAGES AND CODES ===
error.database.notfound.message=We are facing troubles, please contact the support team.
error.domain.exchange.notLastSixMonths.code=PUR_DOM_EX_6M
error.domain.exchange.notLastSixMonths.message=the purchase cannot be converted to the target currency.
error.domain.exchange.null-params.code=PUR_DOM_EX_CURR-CONV_NULL
error.domain.exchange.null-params.message=the purchase cannot be converted to the target currency.
error.domain.exchange.treasury.service.error=Exchange Rates are not available at the moment, please try again later.
